# Установка

Vue.js изначально разработан быть инкрементально адаптируемым. Это означает, что он может быть интегрирован в проект несколькими способами, в зависимости от требований.

Существует три основных способа добавления Vue.js в проект:

1. Импортирование как [CDN пакетом](#cdn) на странице
2. Установка с использованием [npm](#npm)
3. Использование официального [CLI](#cli) для развёртывания проекта, который предоставляет продвинутые инструменты для создания современного рабочего процесса по разработке фронтенда (например, горячая перезагрузка, линтинг при сохранении и многое другое)

## История изменений

Последняя бета-версия: ![beta](https://img.shields.io/npm/v/vue/next.svg)

Подробная информация об изменениях в каждой версии доступна на [GitHub](https://github.com/vuejs/vue-next/releases).

## Инструменты разработчика

> В настоящий момент в бета-тестировании

> Vue Devtools для Vue 3 требуется как минимум `vue@^3.0.0-rc.1`

При использовании Vue рекомендуем также установить [Vue Devtools](https://github.com/vuejs/vue-devtools#vue-devtools) для браузера, которое позволит легче проверять и отлаживать приложения на Vue в удобном интерфейсе.

[Расширение для Chrome](https://chrome.google.com/webstore/detail/vuejs-devtools/ljjemllljcmogpfapbkkighbhhppjdbg)

[Расширение для Firefox](https://addons.mozilla.org/en-US/firefox/addon/vue-js-devtools/)

[Автономное Electron-приложение](https://github.com/vuejs/vue-devtools/blob/dev/packages/shell-electron/README.md)

## CDN

Для прототипирования и в целях изучения можно использовать последнюю версию с CDN:

```html
<script src="https://unpkg.com/vue@next"></script>
```

Для production рекомендуем указывать конкретную версию и сборку, чтобы избежать неожиданных поломок при выходе новых версий.

## npm

npm — рекомендованный способ установки при создании больших приложений на Vue. Он прекрасно сочетается с системами сборки, такими как [Webpack](https://webpack.js.org/) или [Rollup](https://rollupjs.org/). Кроме того, Vue также предоставляет инструменты для создания [однофайловых компонентов](../guide/single-file-component.md).

```bash
# установка последней стабильной сборки
$ npm install vue@next
```

## CLI

Vue предоставляет [официальный CLI](https://github.com/vuejs/vue-cli) для быстрого создания каркаса одностраничных приложений (SPA). Предлагаемые шаблоны содержат всё необходимое для организации современной фронтенд-разработки. За несколько минут можно получить работающую конфигурацию с горячей перезагрузкой модулей, линтингом кода при сохранении и настроенной конфигурацией production-сборки. Подробнее в [документации Vue CLI](https://cli.vuejs.org/ru/).

:::tip Совет
Использование CLI предполагает наличие знаний о Node.js и связанных с ней инструментов сборки. Если вы новичок во Vue или в инструментах для сборки фронтенда, то настоятельно рекомендуем сначала изучить [руководство](introduction.md) без применения каких-либо систем сборки прежде чем начинать использовать CLI.
:::

Для Vue 3 требуется Vue CLI v4.5, доступная в `npm` через `@vue/cli`. Для обновления необходимо переустановить глобально последнюю версию `@vue/cli`:

```bash
yarn global add @vue/cli
# ИЛИ
npm install -g @vue/cli
```

После установки обновлённой версии в проекте Vue необходимо выполнить

```bash
vue upgrade --next
```

## Vite

[Vite](https://github.com/vitejs/vite) — инструмент для сборки веб-приложений, предлагающий исключительно быструю обработку кода, благодаря применяемому подходу по использованию нативных импортов ES-модулей.

Развернуть проект на Vue используя Vite можно с помощью следующих команд.

Используя npm:

```bash
$ npm init vite-app <project-name>
$ cd <project-name>
$ npm install
$ npm run dev
```

или используя Yarn:

```bash
$ yarn create vite-app <project-name>
$ cd <project-name>
$ yarn
$ yarn dev
```

## Объяснение различий сборок

В [папке `dist/` npm-пакета](https://cdn.jsdelivr.net/npm/vue@3.0.0-rc.11/dist/) можно обнаружить несколько различных сборок Vue.js. Рассмотрим подробнее какой файл из `dist` и для каких случаев должен использоваться.

### Из CDN или без систем сборки

#### `vue(.runtime).global(.prod).js`:

- Для использования через `<script src="...">` в браузере, предоставляет глобальный доступ к Vue.
- Компиляция шаблонов в браузере:
  - `vue.global.js` — это «полная» сборка, которая включает в себя и компилятор шаблонов и runtime, поэтому поддерживает компиляцию шаблонов «на лету».
  - `vue.runtime.global.js` содержит только runtime и требует чтобы шаблоны были предварительно скомпилированы на этапе сборки.
- Содержит все внутренние зависимости Vue — т.е. это один файл без зависимостей от других файлов. Это означает, что необходимо импортировать всё из этого файла и этот файл только для того, чтобы убедиться, что получаете тот же самый экземпляр кода.
- Содержит отдельные ветви для production/разработки, а сборка для production предварительно минифицирована. Используйте файлы `*.prod.js` для production.

:::tip Примечание
Глобальные сборки не являются [UMD](https://github.com/umdjs/umd) сборками. Они собраны как [IIFE](https://developer.mozilla.org/en-US/docs/Glossary/IIFE) и предназначены только для использования через `<script src="...">`.
:::

#### `vue(.runtime).esm-browser(.prod).js`:

- Для использования в импортах ES-модулей (в браузере через `<script type="module">`).
- Предоставляет ту же компиляцию в runtime, внедрение всех внутренних зависимостей и жёстко заданное поведение в production/разработке глобальной сборки.

### С системой сборки

#### `vue(.runtime).esm-bundler.js`:

- Для использования с системами сборки, такими как `webpack`, `rollup` и `parcel`.
- Определение ветвления production/разработка через `process.env.NODE_ENV` (значение должно подставляться системой сборки)
- Нет подготовленных минифицированных сборок (минификация должна выполняться наравне с остальным кодом системой сборки)
- Импорт зависимостей (например, `@vue/runtime-core`, `@vue/runtime-compiler`)
  - Импортируемые зависимости также являются esm-сборками и, в свою очередь, будут импортировать свои зависимости (например, `@vue/runtime-core` импортирует `@vue/reactivity`)
  - Это означает, что **можно** устанавливать/импортировать зависимости по-отдельности и не оказаться в ситуации с разными экземплярами этих зависимостей, но необходимо убедиться, что все они разрешаются одной и той же версией.
- Компиляция шаблонов в браузере:
  - `vue.runtime.esm-bundler.js` **(по умолчанию)** содержит только runtime и требует чтобы все шаблоны были предварительно скомпилированы. Это стандартная точка входа для систем сборки (через поле `module` в `package.json`), потому что при их использовании шаблоны обычно компилируются на этапе сборки (например в файлах `*.vue`).
  - `vue.esm-bundler.js` включает в себя компилятор шаблонов. Когда используется система сборки, но всё равно необходима компиляция шаблонов «на лету» (например шаблоны в DOM или шаблоны в виде инлайн-строк JavaScript). Дополнительно нужно сконфигурировать систему сборки, чтобы псевдоним `vue` указывал на этот файл.

### Для рендеринга на стороне сервера (SSR)

#### `vue.cjs(.prod).js`:

- Для использования рендеринга на стороне сервера в Node.js через `require()`.
- Когда собираете приложение с помощью webpack с опцией `target: 'node'` и правильно экстернализируете `vue`, то это та сборка, которая будет загружена.
- Файлы для разработки/production уже предварительно собраны, но соответствующий файл будет автоматически выбираться на основе `process.env.NODE_ENV`.

## Runtime + Компилятор vs. Runtime-only

Если необходимо компилировать шаблоны на клиенте (например, когда передаёте строку в опцию `template` или монтируетесь к элементу DOM, используя его HTML в качестве шаблона), то потребуется компилятор шаблонов, а с ним и подключение полной сборки:

```js
// для такого требуется компилятор шаблонов
Vue.createApp({
  template: '<div>{{ hi }}</div>'
})

// для такого можно обойтись без него
Vue.createApp({
  render() {
    return Vue.h('div', {}, this.hi)
  }
})
```

При использовании `vue-loader` шаблоны внутри файлов `*.vue` будут скомпилированы в JavaScript на этапе сборки. Поэтому необходимости в компиляторе шаблонов в итоговой сборке уже не будет и можно использовать более лёгкую runtime-only сборку.
