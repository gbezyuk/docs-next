# Синтаксис шаблонов

Vue.js использует синтаксис шаблонов, основанный на HTML. Он позволяет декларативно связывать отрисованный DOM с данными экземпляра компонента. Все шаблоны Vue.js являются валидным HTML-кодом, который могут распарсить все соответствующие спецификациям HTML-парсеры и браузеры.

Для работы Vue компилирует шаблоны в `render`-функции виртуального DOM. В сочетании с системой реактивности, Vue умеет определять минимальное число компонентов для повторной отрисовки и применяет минимальное количество манипуляций к DOM при изменении состояния приложения.

Если вы знакомы с концепцией виртуального DOM и предпочитаете использовать ничем не ограниченную мощь JavaScript — можете также [писать render-функции напрямую](render-function.md), минуя шаблоны и даже используя JSX.

## Интерполяции

### Текст

Наиболее простой способ связывания данных — это текстовая интерполяция с использованием синтаксиса Mustache (двойных фигурных скобок):

```html
<span>Сообщение: {{ msg }}</span>
```

Выражение в фигурных скобках будет заменено значением свойства `msg` из соответствующего экземпляра компонента. Кроме того, оно будет обновлено при любом изменении этого свойства.

Возможно также выполнение интерполяции однократно, которая не обновится при изменении данных — с помощью [директивы v-once](../api/directives.md#v-once), но обратите внимание, это повлияет сразу на все связанные переменные в рамках данного элемента:

```html
<span v-once>Это сообщение никогда не изменится: {{ msg }}</span>
```

### Сырой HTML

Значение выражения в двойных фигурных скобках подставляется как простой текст, а не как HTML. Для HTML необходимо использовать [директиву `v-html`](../api/directives.md#v-html):

```html
<p>Двойные фигурные скобки: {{ rawHtml }}</p>
<p>Директива v-html: <span v-html="rawHtml"></span></p>
```

<p class="codepen" data-height="300" data-theme-id="39028" data-default-tab="result" data-user="Vue" data-slug-hash="yLNEJJM" data-editable="true" style="height: 300px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="Rendering v-html">
  <span>See the Pen <a href="https://codepen.io/team/Vue/pen/yLNEJJM">
  Rendering v-html</a> by Vue (<a href="https://codepen.io/Vue">@Vue</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script>

Содержимое тега `span` будет заменено значением свойства `rawHtml`, интерпретированного как обычный HTML — все привязки данных игнорируются. Запомните, вы не можете использовать `v-html` для вложения шаблонов друг в друга, потому что движок шаблонов Vue не основывается на строках. Вместо этого нужно использовать компоненты, позволяющие сочетать и переиспользовать элементы UI.

:::tip Совет
Динамическая отрисовка произвольного HTML-кода на вашем сайте крайне опасна, так как может легко привести к [XSS-уязвимостям](https://ru.wikipedia.org/wiki/Межсайтовый_скриптинг). Используйте интерполяцию HTML только для доверенного кода, и **никогда** не подставляйте туда содержимое, создаваемое пользователями.
:::

### Атрибуты

Синтаксис двойных фигурных скобок не работает с HTML-атрибутами. Используйте вместо него [директиву `v-bind`](../api/directives.md#v-bind):

```html
<div v-bind:id="dynamicId"></div>
```

При использовании с булевыми атрибутами (когда их наличие уже означает `true`) `v-bind` работает немного иначе. В этом примере:

```html
<button v-bind:disabled="isButtonDisabled">Кнопка</button>
```

Если значением `isButtonDisabled` будет `null` или `undefined`, то атрибут `disabled` не добавится в элемент `<button>`.

### Использование выражений JavaScript

Пока мы связывали данные со свойствами в шаблонах только по простым ключам. Но на самом деле при связывании данных Vue поддерживает всю мощь выражений JavaScript:

```html
{{ number + 1 }} {{ ok ? 'YES' : 'NO' }} {{ message.split('').reverse().join('') }}

<div v-bind:id="'list-' + id"></div>
```

Выражения будут вычислены как JavaScript-код в области видимости текущего активного экземпляра. Единственное ограничение в том, что допускается лишь **одно выражение**, поэтому код ниже **НЕ** сработает:

```html
<!-- это не вычисляемое выражение, а определение переменной: -->
{{ var a = 1 }}

<!-- операторы условий не сработают, используйте условные операторы в тернарной форме: -->
{{ if (ok) { return message } }}
```

## Директивы

Директивы — это специальные атрибуты с префиксом `v-`. В качестве значения они принимают **одно выражение JavaScript** (за исключением `v-for` и `v-on`, которые мы изучим далее). Директива реактивно применяет к DOM изменения при обновлении значения этого выражения. Вспомним пример из введения:

```html
<p v-if="seen">Сейчас меня видно</p>
```

В этом случае директива `v-if` удалит или вставит элемент `<p>` в зависимости от истинности значения выражения `seen`.

### Аргументы

Некоторые директивы могут принимать «аргумент», отделённый от названия директивы двоеточием. Например, директива `v-bind` используется для реактивного обновления атрибутов HTML:

```html
<a v-bind:href="url"> ... </a>
```

В данном случае `href` — аргумент, указывающий директиве `v-bind` связать атрибут `href` элемента со значением выражения `url`.

Другим примером будет директива `v-on`, которая отслеживает события DOM:

```html
<a v-on:click="doSomething"> ... </a>
```

В данном случае аргументом является тип события. Подробнее на обработке событий мы остановимся позднее.

### Динамические аргументы

Можно использовать JavaScript-выражение в аргументе директивы, заключив его в квадратные скобки:

```html
<!--
Обратите внимание, что есть некоторые ограничения для выражения аргументов,
подробнее об этом в разделе «Ограничения динамического выражения» ниже.
-->
<a v-bind:[attributeName]="url"> ... </a>
```

Здесь `attributeName` будет выполняться как выражение JavaScript, а его вычисленное значение использоваться в качестве финального значения аргумента. Например, если ваш экземпляр компонента имеет в данных свойство `attributeName`, значение которого равно `"href"`, то это будет эквивалентно привязке `v-bind:href`.

Таким же образом можно использовать динамические аргументы для привязки обработчика к динамическому имени события:

```html
<a v-on:[eventName]="doSomething"> ... </a>
```

В этом примере, когда значение `eventName` будет `"focus"`, то обработчик `v-on:[eventName]` будет эквивалентен `v-on:focus`.

### Модификаторы

Модификаторы — особые постфиксы, добавляемые после точки, обозначающие, что директива должна быть связана каким-то определённым образом. Например, модификатор `.prevent` говорит директиве `v-on` вызвать `event.preventDefault()` при обработке произошедшего события:

```html
<form v-on:submit.prevent="onSubmit">...</form>
```

Больше примеров применения модификаторов вы увидите далее, когда будем подробнее разбирать [`v-on`](events.md#event-modifiers) и [`v-model`](forms.md#modifiers).

## Сокращения

Префикс `v-` служит для визуального определения Vue-специфичных атрибутов в шаблонах. Это удобно, когда Vue используется для добавления динамического поведения в существующей разметке, но для часто используемых директив может показаться многословным. В то же время необходимость в `v-` менее значима при создании [одностраничных приложений](https://ru.wikipedia.org/wiki/Одностраничное_приложение), где Vue контролирует каждый шаблон. Поэтому есть сокращённая запись для двух наиболее часто используемых директив, `v-bind` и `v-on`:

### Сокращение `v-bind`

```html
<!-- полный синтаксис -->
<a v-bind:href="url"> ... </a>

<!-- сокращённая запись -->
<a :href="url"> ... </a>

<!-- сокращённая запись с динамическим именем аргумента -->
<a :[key]="url"> ... </a>
```

### Сокращение `v-on`

```html
<!-- полный синтаксис -->
<a v-on:click="doSomething"> ... </a>

<!-- сокращённая запись -->
<a @click="doSomething"> ... </a>

<!-- сокращённая запись с динамическим именем события -->
<a @[event]="doSomething"> ... </a>
```

Такие атрибуты на вид несколько отличаются от обычного HTML-кода, но символы `:` и `@` являются валидными символами для названий атрибутов, и все браузеры поддерживающие Vue могут их корректно обработать. К тому же, в итоговой разметке они не появятся. Сокращённый синтаксис совершенно необязателен, но он скорее всего вам понравится, когда вы узнаете больше о том, как он используется далее.

> Со следующих страниц в примерах будут использоваться сокращённые варианты, потому что такая запись наиболее распространена у разработчиков Vue.

### Ограничения

#### Ограничения значений динамического аргумента

Ожидается, что динамические аргументы в результате будут строкой, за исключением `null`. Специальное значение `null` можно использовать для явного удаления привязки. Любые другие нестроковые значения будут вызывать предупреждения.

#### Ограничения динамического выражения

Для выражений динамических аргументов есть синтаксические ограничения, поскольку некоторые символы, такие как пробелы и кавычки, являются недопустимыми внутри имён атрибутов HTML. Например:

```html
<!-- Подобное вызовет предупреждение компилятора. -->
<a v-bind:['foo' + bar]="value"> ... </a>
```
Рекомендуем заменять любые сложные выражения на [вычисляемые свойства](computed.md), одну из самых фундаментальных частей Vue, о которой мы поговорим вскоре.

При использовании шаблонов в DOM (шаблонов, написанных непосредственно в HTML-файле) также следует избегать именования ключей прописными символами, потому что браузеры будут принудительно приводить имена атрибутов к нижнему регистру:

```html
<!--
В шаблонах DOM это будет преобразовано в v-bind:[someattr].
Если в экземпляре нет свойства "someattr", то этот код не будет работать.
-->
<a v-bind:[someAttr]="value"> ... </a>
```

#### JavaScript выражения

Выражения в шаблонах ограничены песочницей и имеют доступ только к [ограниченному белому списку глобальных свойств](https://github.com/vuejs/vue-next/blob/master/packages/shared/src/globalsWhitelist.ts#L3), таких как `Math` и `Date`. Не следует пытаться получить доступ к пользовательски глобальным свойствам в выражениях шаблонов.
